% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/TRIM_multi_application.R
\name{rtrim_multi_application}
\alias{rtrim_multi_application}
\title{Apply multiple TRIM models automatically to a dataset}
\usage{
rtrim_multi_application(
  dataset,
  site_column = "commune",
  year_column = "year",
  effectiv_column = "effectif",
  unity_column = "unity",
  covariables = list(NULL),
  cp_candidates = NULL,
  n_cps_max = NULL
)
}
\arguments{
\item{dataset}{A data.frame prepared for TRIM (output of \code{\link{prepare_data_for_trim}}).}

\item{site_column}{Character. Name of the column containing site names. Default: "commune".}

\item{year_column}{Character. Name of the column containing the year. Default: "year".}

\item{effectiv_column}{Character. Name of the column containing abundance values. Default: "effectif".}

\item{unity_column}{Character. Name of the column identifying the unit (e.g., species). Default: "unity".}

\item{covariables}{List of character. Optional columns to include as covariates. Default: list(NULL).}

\item{cp_candidates}{Numeric vector. Candidate years for changepoints. Default: NULL.}

\item{n_cps_max}{Numeric. Maximum number of changepoints to test per model. Default: NULL.}
}
\value{
A list where each element corresponds to a unit (level of `unity_column`) containing:
\itemize{
  \item \code{models} : list of all generated TRIM models.
  \item \code{rtrim_result_table} : summary table of all model results.
  \item \code{valid_results_table} : subset of models considered valid.
  \item \code{significant_results_table} : subset of models considered significant.
}
}
\description{
This function systematically applies different TRIM model configurations (changepoints, covariates)
to a prepared dataset, using the **safe wrappers** \code{\link{safe_trim}} and \code{\link{safe_wald}}.
It tests various models, calculates statistics, and identifies valid/significant models based on internal criteria.
}
\details{
The function uses standard criteria to validate models: overdispersion (< 3),
serial correlation (< 0.4), likelihood ratio (\code{p_LR >= 0.05}), chi-square tests (\code{p_Chi2 >= 0.05}),
and slope standard error (\code{slope_se <= 0.02}).
}
\examples{
# Example using default column names
results_default <- rtrim_multi_application(
  dataset = my_data
)

# Example with custom column names
results_custom <- rtrim_multi_application(
  dataset = my_data,
  site_column = "site_name",
  year_column = "survey_year",
  effectiv_column = "abundance",
  unity_column = "species",
  covariables = list("habitat_type", "temperature"),
  cp_candidates = c(2005, 2010, 2015),
  n_cps_max = 2
)


}
